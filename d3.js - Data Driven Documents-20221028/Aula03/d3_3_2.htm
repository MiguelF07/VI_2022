<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Primeiro exemplo d3</title>

    <style type="text/css">
        div.bar {
            display: inline-block;
            width: 20px;
            height: 75px;
            margin-right: 2px;
            background-color: teal;
        }
    </style>

    <script type="text/javascript" src="http://d3js.org/d3.v4.js"></script>
    <!--script type="text/javascript" src="../d3/d3.min.js"></script-->

</head>


<body>
    <div class="div_d3"> </div>
    <!-- Posição 300,150 com raio 50 e cor vermelha -->
    <script type="text/javascript">
        var w = 700
        var h = 700
        var svg = d3.select("body")
                    .append("svg")
                    .attr("width", w)
                    .attr("height", h)
                    .attr("style", "background-color: grey");

                    var dataset = []

                    for (var i = 0; i < 10; i++) {
                        dataset[i] = []
                        var x = Math.floor((Math.random() * 500));
                        var y = Math.floor((Math.random() * 500));
                        var r = Math.floor((Math.floor(Math.random() * (50 - 10 + 1) + 10)));
                        dataset[i].push(x);
                        dataset[i].push(y);
                        dataset[i].push(r);
                    }

        var circles = svg.selectAll("circle").data(dataset) 
        // .selectAll searches for 'circle' elements in the DOM, but there are none, so it returns an empty selection.
        .enter()
        .append("circle");

        circles.attr("cx", function (d, i) { 
            return d[0];
        });
        circles.attr("cy", function (d, i) {
            return d[1];
        });
        circles.attr("r", function (d, i) {
            return d[2];
        });


        var text = svg.selectAll("text").data(dataset).enter().append("text");
        text.text(function (d) {
            return d[0] + "," + d[1];
        });
        text.attr("x", function (d) {
            return d[0];
        });
        text.attr("y", function (d) {
            return d[1];
        });
        text.attr("font-family", "sans-serif")
            .attr("font-size", "11px")
            .attr("fill", "red");

    </script>
</body>

</html>